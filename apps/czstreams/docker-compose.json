{
  "$schema": "../dynamic-compose-schema.json",
  "services": [
    {
      "name": "czstreams",
      "image": "node:23-alpine",
      "isMain": true,
      "internalPort": 52932,
      "workingDir": "/app",
      "command": "sh -c 'npm install && npm start'",
      "volumes": [
        {
          "hostPath": "${APP_DATA_DIR}/data",
          "containerPath": "/app"
        },
        {
          "hostPath": "${APP_DATA_DIR}/node_modules",
          "containerPath": "/app/node_modules"
        }
      ],
      "environment": {
        "NODE_ENV": "production",
        "PORT": "52932"
      },
      "addPorts": [
        {
          "containerPort": 52932,
          "hostPort": "${APP_PORT}",
          "tcp": true
        }
      ],
      "restart": "unless-stopped"
    }
  ]
}