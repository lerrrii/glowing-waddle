{
  "$schema": "../dynamic-compose-schema.json",
  "services": [
    {
      "name": "jackettvpn",
      "image": "dyonr/jackettvpn:0.20.5138",
      "isMain": true,
      "internalPort": 9117,
      "environment": {
        "VPN_ENABLED": "${VPN_ENABLED-yes}",
        "VPN_TYPE": "${VPN_TYPE-openvpn}",
        "VPN_USERNAME": "${VPN_USERNAME}",
        "VPN_PASSWORD": "${VPN_PASSWORD}",
        "WEBUI_PASSWORD": "${WEBUI_PASSWORD}",
        "LAN_NETWORK": "${LAN_NETWORK}",
        "NAME_SERVERS": "${NAME_SERVERS-1.1.1.1,1.0.0.1}",
        "PUID": "${PUID-1000}",
        "PGID": "${PGID-1000}",
        "UMASK": "${UMASK-002}",
        "HEALTH_CHECK_INTERVAL": "${HEALTH_CHECK_INTERVAL-300}",
        "HEALTH_CHECK_SILENT": "${HEALTH_CHECK_SILENT-1}",
        "ADDITIONAL_PORTS": "${ADDITIONAL_PORTS}"
      },
      "volumes": [
        {"hostPath": "${APP_DATA_DIR}/data/config","containerPath": "/config"},
        {"hostPath": "${APP_DATA_DIR}/data/blackhole","containerPath": "/blackhole"}
      ],
      "capAdd": ["NET_ADMIN"],
      "devices": ["/dev/net/tun"],
      "healthCheck": {
        "test": "bash /usr/local/bin/healthcheck.sh",
        "interval": "30s",
        "timeout": "10s",
        "retries": 3
      }
    }
  ]
}
