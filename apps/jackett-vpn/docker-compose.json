{
  "services": [
    {
      "name": "gluetun",
      "image": "qmcgaw/gluetun:latest",
      "isMain": true,
      "internalPort": 9117,
      "capAdd": ["NET_ADMIN"],
      "devices": ["/dev/net/tun"],
      "environment": {
        {"key": "VPN_SERVICE_PROVIDER", "value": "${JACKETT_VPN_SERVICE_PROVIDER}"},
        {"key": "VPN_TYPE", "value": "${JACKETT_VPN_TYPE}"},
        {"key": "WIREGUARD_PRIVATE_KEY", "value": "${JACKETT_WIREGUARD_PRIVATE_KEY}"},
        {"key": "SERVER_COUNTRIES", "value": "${JACKETT_SERVER_COUNTRIES-Netherlands,United States,Japan}"},
        {"key": "FREE_ONLY", "value": "${JACKETT_FREE_ONLY-on}"},
        {"key": "VPN_PORT_FORWARDING", "value": "${JACKETT_VPN_PORT_FORWARDING-off}"},
        {"key": "FIREWALL_ENABLED_DISABLING_IT_SHOOTS_YOU_IN_YOUR_FOOT", "value": "${JACKETT_FIREWALL-on}"},
        {"key": "FIREWALL_VPN_INPUT_PORTS", "value": "9117"},
        {"key": "FIREWALL_OUTBOUND_SUBNETS", "value": "${JACKETT_FIREWALL_OUTBOUND_SUBNETS-172.16.0.0/12}"},
        {"key": "DOT", "value": "${JACKETT_DNS-on}"},
        {"key": "DOT_IPV6", "value": "${JACKETT_DOT_IPV6-off}"},
        {"key": "DNS_ADDRESS", "value": "127.0.0.1"},
        {"key": "DNS_KEEP_NAMESERVER", "value": "off"},
        {"key": "BLOCK_MALICIOUS", "value": "${JACKETT_BLOCK_MALICIOUS-off}"},
        {"key": "BLOCK_ADS", "value": "${JACKETT_BLOCK_ADS-off}"},
        {"key": "BLOCK_SURVEILLANCE", "value": "${JACKETT_BLOCK_SURVEILLANCE-off}"},
        {"key": "DNS_UPDATE_PERIOD", "value": "${JACKETT_DNS_UPDATE_PERIOD-24h}"},
        {"key": "PUBLICIP_ENABLED", "value": "on"},
        {"key": "PUBLICIP_API", "value": "ipinfo,ifconfigco,ip2location,cloudflare"},
        {"key": "WIREGUARD_MTU", "value": "${JACKETT_WIREGUARD_MTU-1320}"}
      },
      "volumes": [
        {
          "hostPath": "${APP_DATA_DIR}/data/gluetun",
          "containerPath": "/gluetun"
        }
      ],
      "logging": {
        "driver": "json-file",
        "options": {
          "max-size": "10m"
        }
      }
    },
    {
      "name": "jackett",
      "image": "linuxserver/jackett:latest",
      "networkMode": "service:gluetun",
      "environment": {
        "PUID": "${JACKETT_PUID-1000}",
        "PGID": "${JACKETT_PGID-1000}",
        "TZ": "${TZ-Europe/London}"
      },
      "volumes": [
        {
          "hostPath": "${APP_DATA_DIR}/data/config",
          "containerPath": "/config"
        },
        {
          "hostPath": "${APP_DATA_DIR}/data/downloads",
          "containerPath": "/downloads"
        }
      ],
      "dependsOn": ["gluetun"]
    }
  ]
}
