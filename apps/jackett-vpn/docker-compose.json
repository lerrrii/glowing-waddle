{
  "services": [
    {
      "name": "gluetun",
      "image": "qmcgaw/gluetun:latest",
      "isMain": true,
      "internalPort": 9117,
      "capAdd": ["NET_ADMIN"],
      "devices": ["/dev/net/tun"],
      "environment": [
        {
          "key": "VPN_SERVICE_PROVIDER",
          "value": "${JACKETT_VPN_SERVICE_PROVIDER}"
        },
        {
          "key": "VPN_TYPE",
          "value": "${JACKETT_VPN_TYPE}"
        },
        {
          "key": "WIREGUARD_PRIVATE_KEY",
          "value": "${JACKETT_WIREGUARD_PRIVATE_KEY}"
        },
        {
          "key": "VPN_ENDPOINT_IP",
          "value": "${JACKETT_VPN_ENDPOINT_IP}"
        },
        {
          "key": "VPN_ENDPOINT_PORT",
          "value": "${JACKETT_VPN_ENDPOINT_PORT}"
        },
        {
          "key": "WIREGUARD_PUBLIC_KEY",
          "value": "${JACKETT_WIREGUARD_PUBLIC_KEY}"
        },
        {
          "key": "WIREGUARD_ADDRESSES",
          "value": "${JACKETT_WIREGUARD_ADDRESSES}"
        },
        {
          "key": "WIREGUARD_PRESHARED_KEY",
          "value": "${JACKETT_WIREGUARD_PRESHARED_KEY}"
        },
        {
          "key": "OPENVPN_USER",
          "value": "${JACKETT_OPENVPN_USER}"
        },
        {
          "key": "OPENVPN_PASSWORD",
          "value": "${JACKETT_OPENVPN_PASSWORD}"
        },
        {
          "key": "SERVER_COUNTRIES",
          "value": "${JACKETT_SERVER_COUNTRIES}"
        },
        {
          "key": "FREE_ONLY",
          "value": "${JACKETT_FREE_ONLY}"
        },
        {
          "key": "VPN_PORT_FORWARDING",
          "value": "${JACKETT_VPN_PORT_FORWARDING}"
        },
        {
          "key": "FIREWALL_ENABLED_DISABLING_IT_SHOOTS_YOU_IN_YOUR_FOOT",
          "value": "${JACKETT_FIREWALL}"
        },
        {
          "key": "FIREWALL_VPN_INPUT_PORTS",
          "value": "9117"
        },
        {
          "key": "DOT",
          "value": "${JACKETT_DNS}"
        },
        {
          "key": "DOT_IPV6",
          "value": "${JACKETT_DOT_IPV6}"
        },
        {
          "key": "DNS_ADDRESS",
          "value": "127.0.0.1"
        },
        {
          "key": "DNS_KEEP_NAMESERVER",
          "value": "off"
        },
        {
          "key": "BLOCK_MALICIOUS",
          "value": "${JACKETT_BLOCK_MALICIOUS}"
        },
        {
          "key": "BLOCK_ADS",
          "value": "${JACKETT_BLOCK_ADS}"
        },
        {
          "key": "BLOCK_SURVEILLANCE",
          "value": "${JACKETT_BLOCK_SURVEILLANCE}"
        },
        {
          "key": "DNS_UPDATE_PERIOD",
          "value": "${JACKETT_DNS_UPDATE_PERIOD}"
        },
        {
          "key": "PUBLICIP_ENABLED",
          "value": "on"
        },
        {
          "key": "PUBLICIP_API",
          "value": "ipinfo,ifconfigco,ip2location,cloudflare"
        },
        {
          "key": "WIREGUARD_MTU",
          "value": "${JACKETT_WIREGUARD_MTU}"
        },
        {
          "key": "TZ",
          "value": "${TZ-Europe/London}"
        }
      ],
      "volumes": [
        {
          "hostPath": "${APP_DATA_DIR}/data/gluetun",
          "containerPath": "/gluetun"
        }
      ],
      "logging": {
        "driver": "json-file",
        "options": {
          "max-size": "10m"
        }
      }
    },
    {
      "name": "jackett",
      "image": "linuxserver/jackett:latest",
      "networkMode": "service:gluetun",
      "environment": [
        {
          "key": "PUID",
          "value": "${JACKETT_PUID-1000}"
        },
        {
          "key": "PGID",
          "value": "${JACKETT_PGID-1000}"
        },
        {
          "key": "TZ",
          "value": "${TZ-Europe/London}"
        }
      ],
      "volumes": [
        {
          "hostPath": "${APP_DATA_DIR}/data/config",
          "containerPath": "/config"
        },
        {
          "hostPath": "${APP_DATA_DIR}/data/downloads",
          "containerPath": "/downloads"
        }
      ],
      "dependsOn": ["gluetun"]
    }
  ]
}
