{
  "$schema": "../dynamic-compose-schema.json",
  "services": [
    {
      "name": "wireguard",
      "image": "linuxserver/wireguard:latest",
      "internalPort": 51820,
      "environment": {
        "PUID": "1000",
        "PGID": "1000",
        "TZ": "${TZ}",
        "SERVERURL": "wg0",
        "SERVERPORT": "51820",
        "PEERS": "1",
        "PEERDNS": "auto"
      },
      "capabilities": ["NET_ADMIN", "SYS_MODULE"],
      "devices": ["/dev/net/tun:/dev/net/tun"],
      "volumes": [
        {
          "hostPath": "${APP_DATA_DIR}/wireguard",
          "containerPath": "/config"
        },
        {
          "hostPath": "/lib/modules",
          "containerPath": "/lib/modules"
        }
      ]
    },
    {
      "name": "jackett",
      "image": "lscr.io/linuxserver/jackett:latest",
      "isMain": true,
      "internalPort": 9117,
      "environment": {
        "PUID": "1000",
        "PGID": "1000",
        "TZ": "${TZ}",
        "AUTO_UPDATE": "true"
      },
      "volumes": [
        {
          "hostPath": "${APP_DATA_DIR}/jackett",
          "containerPath": "/config"
        },
        {
          "hostPath": "${ROOT_FOLDER_HOST}/media/torrents",
          "containerPath": "/media/torrents"
        }
      ],
      "networkMode": "service:wireguard"
    }
  ]
}
